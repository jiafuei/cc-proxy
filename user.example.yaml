# Copy this file to ~/.cc-proxy/user.yaml and modify as needed

providers:
  # Anthropic/Claude provider
  - name: 'anthropic-provider'
    api_key: !env ANTHROPIC_API_KEY
    url: 'https://api.anthropic.com'
    type: 'anthropic'
    timeout: 300

  # OpenAI provider
  - name: 'openai-provider' 
    api_key: !env OPENAI_API_KEY
    url: 'https://api.openai.com'
    type: 'openai'
    timeout: 300
    transformers:
      request:
        - class: 'app.services.transformers.openai.OpenAIRequestTransformer'
          params: {}
      response:
        - class: 'app.services.transformers.openai.OpenAIResponseTransformer'
          params: {}

  # Gemini provider
  - name: 'gemini-provider'
    api_key: !env GEMINI_API_KEY
    url: 'https://generativelanguage.googleapis.com'
    type: 'gemini'
    timeout: 300
    transformers:
      request:
        - class: 'app.services.transformers.utils.GeminiApiKeyTransformer'
          params: {}
        - class: 'app.services.transformers.gemini.GeminiRequestTransformer'
          params: {}
      response:
        - class: 'app.services.transformers.gemini.GeminiResponseTransformer'
          params: {}

  # Custom Anthropic provider with comprehensive transformers
  - name: 'custom-anthropic'
    api_key: !env CUSTOM_ANTHROPIC_KEY
    url: 'https://api.anthropic.com'
    type: 'anthropic'
    timeout: 300
    transformers:
      request:
        - class: 'app.services.transformers.anthropic.ClaudeSystemMessageCleanerTransformer'
          params: {}
        - class: 'app.services.transformers.anthropic.ClaudeSoftwareEngineeringSystemMessageTransformer'
          params: {}
        - class: 'app.services.transformers.anthropic.AnthropicCacheTransformer'
          params:
            max_tools_breakpoints: 2
        - class: 'app.services.transformers.utils.HeaderTransformer'
          params:
            operations:
              - key: 'x-api-key'
                value: !env CUSTOM_ANTHROPIC_KEY
              - key: 'anthropic-version'
                value: '2023-06-01'
        - class: 'app.services.transformers.utils.ToolDescriptionOptimizerTransformer'
          params: {}
      response:
        - class: 'app.services.transformers.anthropic.AnthropicResponseTransformer'
          params: {}

# Model definitions
models:
  - alias: 'sonnet'
    id: 'claude-3-5-sonnet-20241022'
    provider: 'anthropic-provider'
  - alias: 'haiku'
    id: 'claude-3-5-haiku-20241022'
    provider: 'anthropic-provider'
  - alias: 'gpt4'
    id: 'gpt-4o'
    provider: 'openai-provider'
  - alias: 'gpt4-mini'
    id: 'gpt-4o-mini'
    provider: 'openai-provider'
  - alias: 'gemini'
    id: 'gemini-pro'
    provider: 'gemini-provider'
  - alias: 'custom-claude'
    id: 'claude-3-5-sonnet-20241022'
    provider: 'custom-anthropic'

# Request routing configuration
routing:
  default: 'sonnet'
  background: 'haiku'
  planning: 'sonnet'
  thinking: 'sonnet'
  plan_and_think: 'sonnet'
  builtin_tools: 'sonnet'