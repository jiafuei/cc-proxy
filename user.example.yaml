# Copy this file to ~/.cc-proxy/user.yaml and modify as needed

providers:
  # Anthropic/Claude provider
  - name: 'anthropic-provider'
    api_key: !env ANTHROPIC_API_KEY
    base_url: 'https://api.anthropic.com'
    type: 'anthropic'
    timeout: 300

  # OpenAI provider
  - name: 'openai-provider'
    api_key: !env OPENAI_API_KEY
    base_url: 'https://api.openai.com'
    type: 'openai'
    timeout: 300
    transformers:
      claude:
        request:
          - class: 'app.transformers.shared.utils.HeaderTransformer'
            params:
              operations:
                - key: 'authorization'
                  prefix: 'Bearer '
                  value: !env OPENAI_API_KEY
        response:
          - class: 'app.transformers.providers.claude.openai.ClaudeOpenAIResponseTransformer'
            params: {}

  # Gemini provider
  - name: 'gemini-provider'
    api_key: !env GEMINI_API_KEY
    base_url: 'https://generativelanguage.googleapis.com'
    type: 'gemini'
    timeout: 300
    transformers:
      claude:
        request:
          - class: 'app.transformers.shared.utils.GeminiApiKeyTransformer'
            params: {}
          - class: 'app.transformers.providers.claude.gemini.ClaudeGeminiRequestTransformer'
            params: {}
        response:
          - class: 'app.transformers.providers.claude.gemini.ClaudeGeminiResponseTransformer'
            params: {}

  # Custom Anthropic provider with comprehensive transformers
  - name: 'custom-anthropic'
    api_key: !env CUSTOM_ANTHROPIC_KEY
    base_url: 'https://api.anthropic.com'
    type: 'anthropic'
    timeout: 300
    transformers:
      claude:
        request:
          - class: 'app.transformers.providers.claude.anthropic.ClaudeSystemMessageCleanerTransformer'
            params: {}
          - class: 'app.transformers.providers.claude.anthropic.ClaudeSoftwareEngineeringSystemMessageTransformer'
            params: {}
          - class: 'app.transformers.providers.claude.anthropic.CacheBreakpointTransformer'
            params:
              max_tools_breakpoints: 2
          - class: 'app.transformers.shared.utils.ToolDescriptionOptimizerTransformer'
            params: {}
        response:
          - class: 'app.transformers.providers.claude.anthropic.ClaudeAnthropicResponseTransformer'
            params: {}

# Model definitions
models:
  - alias: 'sonnet'
    id: 'claude-3-5-sonnet-20241022'
    provider: 'anthropic-provider'
  - alias: 'haiku'
    id: 'claude-3-5-haiku-20241022'
    provider: 'anthropic-provider'
  - alias: 'gpt4'
    id: 'gpt-4o'
    provider: 'openai-provider'
  - alias: 'gpt4-mini'
    id: 'gpt-4o-mini'
    provider: 'openai-provider'
  - alias: 'gemini'
    id: 'gemini-pro'
    provider: 'gemini-provider'
  - alias: 'custom-claude'
    id: 'claude-3-5-sonnet-20241022'
    provider: 'custom-anthropic'

# Request routing configuration
routing:
  default: 'sonnet'
  background: 'haiku'
  planning: 'sonnet'
  thinking: 'sonnet'
  plan_and_think: 'sonnet'
  builtin_tools: 'sonnet'
